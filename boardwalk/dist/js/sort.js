$(function(){$("tr td").on("click",function(){$(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active")}),$(".add").on("click",function(){var t=$(".brand"),a=[];t.each(function(r){function e(a){for(var r=0;r<a.length;r++){h+="<table border=1>";for(var e=0;e<a[r].length;e++){h+="<tr>";for(var n=0;n<a[r][e].length;n++){var i=t.eq(r).find("table").eq(n).find("td.active").eq(a[r][e][n]).html()||"x";h+="<td>"+i+"</td>"}h+="</tr>"}h+="</table>"}}for(var n=$(this),i=n.find("table"),l=i.length,h="",v=[],f=0;f<l;f++)0==f?v[f]=1:v[f]=i.eq(f).find(".active").length;var s=function(t){var r=t[0],e=t[1],n=t.length,i=new Array;if($.isArray(r))for(var l=0;l<r.length;l++)for(var h=0;h<e;h++){var v=r[l].slice();v.push(h),i.push(v)}else for(var l=0;l<r;l++)for(var h=0;h<e;h++){var f=[l,h];i.push(f)}var o=[];if(o[0]=i,n>2){for(var c=2;c<n;c++)o.push(t[c]);o.length>=2&&s(o)}else a.push(i)};v.length&&(s(v),e(a),$("#newtable").html(h))})})});